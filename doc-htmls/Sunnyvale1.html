<html><head><meta content="text/html; charset=UTF-8" http-equiv="content-type"><style type="text/css">.lst-kix_yp37zycjbb09-7>li:before{content:"\0025cb  "}.lst-kix_yp37zycjbb09-5>li:before{content:"\0025a0  "}.lst-kix_yp37zycjbb09-4>li:before{content:"\0025cb  "}.lst-kix_yp37zycjbb09-8>li:before{content:"\0025a0  "}.lst-kix_yp37zycjbb09-3>li:before{content:"\0025cf  "}ul.lst-kix_yp37zycjbb09-4{list-style-type:none}ul.lst-kix_yp37zycjbb09-3{list-style-type:none}ul.lst-kix_yp37zycjbb09-6{list-style-type:none}ul.lst-kix_yp37zycjbb09-5{list-style-type:none}ul.lst-kix_yp37zycjbb09-0{list-style-type:none}li.li-bullet-0:before{margin-left:-18pt;white-space:nowrap;display:inline-block;min-width:18pt}.lst-kix_yp37zycjbb09-2>li:before{content:"\0025a0  "}ul.lst-kix_yp37zycjbb09-2{list-style-type:none}ul.lst-kix_yp37zycjbb09-1{list-style-type:none}.lst-kix_yp37zycjbb09-1>li:before{content:"\0025cb  "}ul.lst-kix_yp37zycjbb09-8{list-style-type:none}ul.lst-kix_yp37zycjbb09-7{list-style-type:none}.lst-kix_yp37zycjbb09-0>li:before{content:"\0025cf  "}.lst-kix_yp37zycjbb09-6>li:before{content:"\0025cf  "}ol{margin:0;padding:0}table td,table th{padding:0}.c19{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#f3f3f3;border-top-width:1pt;border-right-width:1pt;border-left-color:#f3f3f3;vertical-align:top;border-right-color:#f3f3f3;border-left-width:1pt;border-top-style:solid;background-color:#f3f3f3;border-left-style:solid;border-bottom-width:1pt;width:438.8pt;border-top-color:#f3f3f3;border-bottom-style:solid}.c31{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#ffffff;border-top-width:1pt;border-right-width:1pt;border-left-color:#ffffff;vertical-align:top;border-right-color:#ffffff;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:468pt;border-top-color:#ffffff;border-bottom-style:solid}.c12{-webkit-text-decoration-skip:none;color:#000000;font-weight:700;text-decoration:underline;vertical-align:baseline;text-decoration-skip-ink:none;font-size:11pt;font-family:"Arial";font-style:normal}.c5{margin-left:288pt;padding-top:0pt;text-indent:36pt;padding-bottom:0pt;line-height:1.15;orphans:2;widows:2;text-align:center}.c0{-webkit-text-decoration-skip:none;color:#1155cc;font-weight:400;text-decoration:underline;text-decoration-skip-ink:none;font-size:10pt;font-family:"Open Sans"}.c6{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:9pt;font-family:"Courier";font-style:normal}.c8{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:9pt;font-family:"Courier";font-style:italic}.c18{padding-top:0pt;text-indent:36pt;padding-bottom:0pt;line-height:1.15;orphans:2;widows:2;text-align:left}.c4{padding-top:0pt;padding-bottom:10pt;line-height:1.15;orphans:2;widows:2;text-align:left}.c33{color:#000000;text-decoration:none;vertical-align:baseline;font-size:8pt;font-style:normal}.c2{padding-top:0pt;padding-bottom:0pt;line-height:1.0;text-align:left;height:11pt}.c26{-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline;text-decoration-skip-ink:none;font-size:8pt}.c11{color:#000000;text-decoration:none;vertical-align:baseline;font-size:11pt;font-style:normal}.c23{border-spacing:0;border-collapse:collapse;margin-right:auto}.c13{font-size:9pt;font-family:"Courier";font-style:italic;font-weight:700}.c24{text-decoration:none;vertical-align:baseline;font-size:11pt;font-style:normal}.c7{padding-top:0pt;padding-bottom:0pt;line-height:1.0;text-align:left}.c9{background-color:#ffffff;max-width:468pt;padding:72pt 72pt 72pt 72pt}.c22{font-size:9pt;font-family:"Courier";font-weight:400}.c20{font-family:"Consolas";color:#ffffff;font-weight:400}.c3{font-weight:400;font-family:"Open Sans"}.c14{color:inherit;text-decoration:inherit}.c30{font-weight:400;font-family:"Consolas"}.c15{font-weight:400;font-family:"Arial"}.c1{font-weight:700;font-family:"Open Sans"}.c25{padding:0;margin:0}.c10{margin-left:36pt;padding-left:0pt}.c16{font-weight:700;font-family:"Courier"}.c32{height:48.8pt}.c29{height:0pt}.c17{background-color:#674ea7}.c21{height:11pt}.c28{color:#b7b7b7}.c27{background-color:#000000}.title{padding-top:0pt;color:#000000;font-size:26pt;padding-bottom:3pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}.subtitle{padding-top:0pt;color:#666666;font-size:15pt;padding-bottom:16pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}li{color:#000000;font-size:11pt;font-family:"Arial"}p{margin:0;color:#000000;font-size:11pt;font-family:"Arial"}h1{padding-top:20pt;color:#000000;font-size:20pt;padding-bottom:6pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h2{padding-top:18pt;color:#000000;font-size:16pt;padding-bottom:6pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h3{padding-top:16pt;color:#434343;font-size:14pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h4{padding-top:14pt;color:#666666;font-size:12pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h5{padding-top:12pt;color:#666666;font-size:11pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h6{padding-top:12pt;color:#666666;font-size:11pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;font-style:italic;orphans:2;widows:2;text-align:left}</style></head><body class="c9"><p class="c18"><span class="c3">In the previous section, we compiled and ran the jSwiftP package on the Sunnyvale login node, </span><span class="c1">bubbles</span><span class="c3">. This node is not meant to run extensive computations, only for development, debugging, and submitting batch jobs to the core nodes. In this section, we will develop a bash script (.sh file) that contains the commands to submit a job using </span><span class="c1">qsub</span><span class="c11 c3">. </span></p><p class="c4"><span class="c3">For more details on submitting a job, refer to </span><span class="c3 c26"><a class="c14" href="https://www.google.com/url?q=https://wiki.cita.utoronto.ca/index.php/Sunnyvale%23Submitting_Jobs&amp;sa=D&amp;source=editors&amp;ust=1627405237647000&amp;usg=AOvVaw1wg-oREUmt2prSaAT9qqXg">https://wiki.cita.utoronto.ca/index.php/Sunnyvale#Submitting_Jobs</a></span><span class="c3 c33">&nbsp;</span></p><p class="c4"><span class="c11 c3">Here is a sample script:</span></p><p class="c5"><span class="c16 c27 c28">test-bash.sh</span></p><a id="t.93ef98234c631cff37fc332bc44ab00f948bccf2"></a><a id="t.0"></a><table class="c23"><tbody><tr class="c32"><td class="c19" colspan="1" rowspan="1"><p class="c7"><span class="c6">#!/bin/bash -l</span></p><p class="c7"><span class="c6">#PBS -l nodes=1:ppn=8,walltime=05:10:00</span></p><p class="c7"><span class="c6">#PBS -N maninder-test-sim</span></p><p class="c7"><span class="c6">#PBS -m abe</span></p><p class="c7"><span class="c6">#PBS -q workq</span></p><p class="c7"><span class="c6">#PBS -M m.dhanauta@mail.utoronto.ca</span></p><p class="c2"><span class="c6"></span></p><p class="c2"><span class="c6"></span></p><p class="c7"><span class="c6">cd $PBS_O_WORKDIR</span></p><p class="c2"><span class="c6"></span></p><p class="c2"><span class="c6"></span></p><p class="c7"><span class="c6">module purge</span></p><p class="c7"><span class="c6">module load maui torque</span></p><p class="c7"><span class="c6">module load gcc/6.3.0</span></p><p class="c2"><span class="c6"></span></p><p class="c7"><span class="c22">/home/</span><span class="c13">username</span><span class="c22">/jswiftP/imperfect/jswift2_symba7_imperfect_fix2_time &lt; /home/</span><span class="c13">username</span><span class="c6">/jswiftP/example/ed-20M_main.in &gt;&gt; output.log</span></p><p class="c2"><span class="c6"></span></p><p class="c2"><span class="c6"></span></p></td></tr></tbody></table><p class="c4 c21"><span class="c12"></span></p><p class="c4"><span class="c11 c15">We submit batch jobs to a queue using the PBS system, which requires the .sh to have a special header indicating resources and what queue to load the job into.</span></p><p class="c4"><span class="c3">The job for SyMBA is serial, so we use the </span><span class="c1">workq</span><span class="c3">. It is a general purpose queue which can use any available node. This queue is explicitly intended for single-core (serial) or single-node general purpose jobs. This queue allows a maximum of 1 node. The upper limit on the number of processes per nodes is ppn=8. We use </span><span class="c16">#PBS -q workq</span><span class="c3">&nbsp;to indicate the queue type. Other queue types include </span><span class="c1">hpq</span><span class="c3">, </span><span class="c1">sandyq</span><span class="c3">&nbsp;and </span><span class="c1">greenq</span><span class="c11 c3">.</span></p><p class="c4"><span class="c11 c3">A summary of the other header attributes:</span></p><ul class="c25 lst-kix_yp37zycjbb09-0 start"><li class="c4 c10 li-bullet-0"><span class="c3">Name your job using </span><span class="c22">#PBS -N </span><span class="c8">job_name</span></li><li class="c4 c10 li-bullet-0"><span class="c3">Email notifications using </span><span class="c6">#PBS -M m.dhanauta@mail.utoronto.ca</span></li><li class="c4 c10 li-bullet-0"><span class="c3">Change </span><span class="c22">walltime=05:10:00 </span><span class="c11 c3">according to your code (max of 48 hrs)</span></li></ul><p class="c4"><span class="c11 c3">* Jobs are scheduled automatically and preference is given to those with smaller wall-time. </span></p><p class="c4"><span class="c3">For more details on the PBS system, refer to </span><span class="c0"><a class="c14" href="https://www.google.com/url?q=https://latisresearch.umn.edu/creating-a-PBS-script&amp;sa=D&amp;source=editors&amp;ust=1627405237652000&amp;usg=AOvVaw10XskrzN_XlQLLQvAgKm87">https://latisresearch.umn.edu/creating-a-PBS-script</a></span><span class="c11 c3">&nbsp;</span></p><p class="c4"><span class="c11 c3">Once the .sh is prepared, submit the job on Sunnyvale:</span></p><a id="t.299f6518888422ed01fcbc2c74b49d15cd930807"></a><a id="t.1"></a><table class="c23"><tbody><tr class="c29"><td class="c17 c31" colspan="1" rowspan="1"><p class="c7"><span class="c20 c24">$ qsub test-bash.sh</span></p></td></tr></tbody></table><p class="c4 c21"><span class="c11 c3"></span></p><p class="c4"><span class="c3">To monitor your jobs, use </span><span class="c3 c17">&nbsp;</span><span class="c17 c20">$ showq</span><span class="c3 c17">&nbsp;</span><span class="c3">. After a job has finished PBS will create an output file and an error file. These files are named </span><span class="c30">job_name.o$PBS_JOBID</span><span class="c3">&nbsp;and </span><span class="c30">job_name.e$PBS_JOBID</span><span class="c11 c3">. You should also receive an email upon submission and completion of the job.</span></p><p class="c4"><span class="c3 c11">You are now ready to run your own simulations using the Swift subroutine package.</span></p></body></html>